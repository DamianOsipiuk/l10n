{"version":3,"sources":["l10n.js"],"names":["l10n","loc","translations","catalogs","Object","keys","forEach","msgid","locale","language","t","getEntry","x","context","n","msgidPlural","amount","entry","getPluralMessageIdx","setLocale","_init","substr","document","addEventListener","ev","detail","navigator","getLocale","pluralCallbacks","undefined","Function","plurals","_default","ak","am","ar","arn","ay","be","bo","br","bs","cs","csb","cy","dz","fa","fil","fr","ga","gun","hr","hy","id","ja","jv","ka","km","ko","kw","ky","ln","lo","lt","lv","mg","mi","mk","ms","mt","nso","pl","pt","ro","ru","sk","sl","sr","su","th","ti","tr","uk","uz","vi","wa","zh"],"mappings":";AA+CA,aA7Ce,SAASA,EAAKC,EAAKC,GAC9BC,EAASF,GAAOE,EAASF,IAAQ,GACjCG,OAAOC,KAAKH,GAAcI,QAAQ,SAAAC,GAASJ,OAAAA,EAASF,GAAKM,GAASL,EAAaK,KAyBnF,IAAIC,EAAQC,EAkBZ,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EAxCAT,EAAKU,EAAI,SAAAH,GAASI,OAAAA,EAASJ,IAAUA,GAErCP,EAAKY,EAAI,SAACC,EAASN,GAAUI,OAAAA,EAASE,EAAU,IAAWN,IAAUA,GAErEP,EAAKc,EAAI,SAACP,EAAOQ,EAAaC,GACpBC,IAAAA,EAAQN,EAASJ,GACdU,OAAAA,GAASA,EAAM,IAAMA,EAAM,GAAMA,EAAMC,EAAoBF,IAAuB,IAAXA,EAAeT,EAAQQ,GAG3Gf,EAAKmB,UAAY,SAAClB,EAAKmB,GAEnBX,GADAD,EAASP,GACSoB,OAAO,EAAG,IAMhCC,SAASC,iBAAiB,kBAAmB,SAAAC,GAAMxB,OAAAA,EAAKmB,UAAUK,EAAGC,OAAOjB,UAO5ER,EAAKmB,UAAUO,UAAUjB,UAAU,GACnCT,EAAK2B,UAAY,WAAMnB,OAAAA,GAEvB,IAAIL,EAAW,GACXyB,EAAkB,GAClBjB,EAAW,SAAAJ,GAASJ,OAAAA,EAASK,GAAUL,EAASK,GAAQD,QAASsB,GAEjEX,EAAsB,SAAAF,GAKfY,OAJFA,EAAgBnB,KAEjBmB,EAAgBnB,GAAY,IAAIqB,SAAS,IAAgBC,WAAAA,OAAAA,EAAQtB,IAAasB,EAAQC,SAAtF,WAEGJ,EAAgBnB,GAAUO,IAIjCe,EAAU,CACVC,SAAS,OACTC,GAAG,MACHC,GAAG,MACHC,GAAG,wFACHC,IAAI,MACJC,GAAG,IACHC,GAAG,yEACHC,GAAG,IACHC,GAAG,MACHC,GAAG,yEACHC,GAAG,8BACHC,IAAI,2DACJC,GAAG,0CACHC,GAAG,IACHC,GAAG,IACHC,IAAI,MACJC,GAAG,MACHC,GAAG,6CACHC,IAAI,MACJC,GAAG,yEACHC,GAAG,IACHC,GAAG,IACHC,GAAG,IACHC,GAAG,OACHC,GAAG,IACHC,GAAG,IACHC,GAAG,IACHC,GAAG,mCACHC,GAAG,IACHC,GAAG,MACHC,GAAG,IACHC,GAAG,gEACHC,GAAG,sCACHC,GAAG,MACHC,GAAG,MACHC,GAAG,sBACHC,GAAG,IACHC,GAAG,sEACHC,IAAI,MACJC,GAAG,2DACHC,GAAG,MACHC,GAAG,6CACHC,GAAG,yEACHC,GAAG,8BACHC,GAAG,yDACHC,GAAG,yEACHC,GAAG,IACHC,GAAG,IACHC,GAAG,MACHC,GAAG,IACHC,GAAG,yEACHC,GAAG,IACHC,GAAG,IACHC,GAAG,MACHC,GAAG","file":"l10n.js","sourceRoot":"..","sourcesContent":["// public\n\nexport default function l10n(loc, translations) {\n    catalogs[loc] = catalogs[loc] || {};\n    Object.keys(translations).forEach(msgid => catalogs[loc][msgid] = translations[msgid]);\n};\n\nl10n.t = msgid => getEntry(msgid) || msgid;\n\nl10n.x = (context, msgid) => getEntry(context + \"\\u0004\" + msgid) || msgid;\n\nl10n.n = (msgid, msgidPlural, amount) => {\n    const entry = getEntry(msgid);\n    return  (entry && entry[0] && entry[1]) ? entry[getPluralMessageIdx(amount)] : (amount === 1 ? msgid : msgidPlural);\n};\n\nl10n.setLocale = (loc, _init) => {\n    locale = loc;\n    language = locale.substr(0, 2);\n\n    // disabled for now, because it doesn't work in ES5\n    // _init || document.dispatchEvent(new CustomEvent(\"l10n.locale.switch\", { detail : { locale } }));\n};\n\ndocument.addEventListener(\"l10n.locale.set\", ev => l10n.setLocale(ev.detail.locale));\n\n\n// private\n\nlet locale, language;\n\nl10n.setLocale(navigator.language, true);\nl10n.getLocale = () => locale;\n\nlet catalogs = {};\nlet pluralCallbacks = {};\nlet getEntry = msgid => catalogs[locale] ? catalogs[locale][msgid] : undefined;\n\nlet getPluralMessageIdx = amount => {\n    if (!pluralCallbacks[language])\n        /*jshint evil:true */\n        pluralCallbacks[language] = new Function(\"n\", `return (${plurals[language] || plurals._default}) | 0`);\n\n    return pluralCallbacks[language](amount);\n};\n\n// Gettext pluralisation rules for many languages\nlet plurals = {\n    _default:\"n!=1\",\n    ak:\"n>1\",\n    am:\"n>1\",\n    ar:\"(n==0)?0:((n==1)?1:((n==2)?2:((n%100>=3&&n%100<=10)?3:((n%100>=11&&n%100<=99)?4:5))))\",\n    arn:\"n>1\",\n    ay:\"0\",\n    be:\"(n%10==1&&n%100!=11)?0:((n%10>=2&&n%10<=4&&(n%100<10||n%100>=20))?1:2)\",\n    bo:\"0\",\n    br:\"n>1\",\n    bs:\"(n%10==1&&n%100!=11)?0:((n%10>=2&&n%10<=4&&(n%100<10||n%100>=20))?1:2)\",\n    cs:\"(n==1)?0:((n>=2&&n<=4)?1:2)\",\n    csb:\"(n==1)?0:((n%10>=2&&n%10<=4&&(n%100<10||n%100>=20))?1:2)\",\n    cy:\"(n==1)?0:((n==2)?1:((n!=8&&n!=11)?2:3))\",\n    dz:\"0\",\n    fa:\"0\",\n    fil:\"n>1\",\n    fr:\"n>1\",\n    ga:\"(n==1)?0:((n==2)?1:((n<7)?2:((n<11)?3:4)))\",\n    gun:\"n>1\",\n    hr:\"(n%10==1&&n%100!=11)?0:((n%10>=2&&n%10<=4&&(n%100<10||n%100>=20))?1:2)\",\n    hy:\"0\",\n    id:\"0\",\n    ja:\"0\",\n    jv:\"n!=0\",\n    ka:\"0\",\n    km:\"0\",\n    ko:\"0\",\n    kw:\"(n==1)?0:((n==2)?1:((n==3)?2:3))\",\n    ky:\"0\",\n    ln:\"n>1\",\n    lo:\"0\",\n    lt:\"(n%10==1&&n%100!=11)?0:((n%10>=2&&(n%100<10||n%100>=20))?1:2)\",\n    lv:\"(n%10==1&&n%100!=11)?0:((n!=0)?1:2)\",\n    mg:\"n>1\",\n    mi:\"n>1\",\n    mk:\"(n==1||n%10==1)?0:1\",\n    ms:\"0\",\n    mt:\"(n==1)?0:((n==0||(n%100>1&&n%100<11))?1:((n%100>10&&n%100<20)?2:3))\",\n    nso:\"n>1\",\n    pl:\"(n==1)?0:((n%10>=2&&n%10<=4&&(n%100<10||n%100>=20))?1:2)\",\n    pt:\"n>1\",\n    ro:\"(n==1)?0:((n==0||(n%100>0&&n%100<20))?1:2)\",\n    ru:\"(n%10==1&&n%100!=11)?0:((n%10>=2&&n%10<=4&&(n%100<10||n%100>=20))?1:2)\",\n    sk:\"(n==1)?0:((n>=2&&n<=4)?1:2)\",\n    sl:\"(n%100==1)?0:((n%100==2)?1:((n%100==3||n%100==4)?2:3))\",\n    sr:\"(n%10==1&&n%100!=11)?0:((n%10>=2&&n%10<=4&&(n%100<10||n%100>=20))?1:2)\",\n    su:\"0\",\n    th:\"0\",\n    ti:\"n>1\",\n    tr:\"0\",\n    uk:\"(n%10==1&&n%100!=11)?0:((n%10>=2&&n%10<=4&&(n%100<10||n%100>=20))?1:2)\",\n    uz:\"0\",\n    vi:\"0\",\n    wa:\"n>1\",\n    zh:\"0\"\n};\n"]}